!function(t){t.add("plugin","counter",{init:function(t){this.app=t,this.editor=t.editor,this.statusbar=t.statusbar},start:function(){this.editor.getElement().on("keyup.redactor-plugin-counter",this.count.bind(this)),this.count()},stop:function(){this.editor.getElement().off(".redactor-plugin-counter"),this.statusbar.removeItem("words"),this.statusbar.removeItem("chars")},count:function(){var t=0,e=0,r=0,s=this.editor.getElement().html();if(""!==(s=this._clean(s))){var a=s.split(/\s+/),i=s.match(/\s/g);t=a?a.length:0,r=i?i.length:0,e=s.length}var n={words:t,characters:e,spaces:r};this.app.broadcast("counter",n),this.statusbar.add("words","words: "+n.words),this.statusbar.add("chars","chars: "+n.characters)},_clean:function(t){return t=t.replace(/<\/(.*?)>/gi," "),t=t.replace(/<(.*?)>/gi,""),t=t.replace(/\t/gi,""),t=t.replace(/\n/gi," "),t=t.replace(/\r/gi," "),t=t.replace(/\u200B/g,""),t=t.replace(/&nbsp;/g,"1"),t=t.trim()}})}(Redactor);